(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{"+Bsv":function(e,t,n){"use strict";var a=n("ERkP"),o=n("3XMw"),i=n.n(o),s=n("M2x3"),r="settingsAppBar",c=n("/yvb"),l=n("rHpw");const d=i.a.bb081ea1,u={viewType:"settings_button"},p=a.memo((({onPress:e,pullRight:t,to:n})=>a.createElement(c.a,{accessibilityLabel:d,behavioralEventContext:u,hoverLabel:{label:d},icon:a.createElement(s.a,null),link:n,onPress:e,pullRight:t,style:m.button,testID:r,type:"primaryText"}))),m=l.a.create((e=>({button:{marginVertical:`calc(-${e.spaces.space12})`}})));t.a=p},QuZr:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var a=n("KEM+"),o=n.n(a),i=n("ERkP"),s=n("oQhu"),r=n("z2Pn"),c=n("rxPX");const l=Object(s.a)(((e,t)=>t&&t.notificationsModule(e)));var d=n("FIs5"),u=n("ezF+"),p=n("xZXe"),m=n("QIgh"),f=n("8UdT"),b=n("AP4B");var h={loader:()=>Promise.all([n.e(4),n.e(212)]).then(n.bind(null,"RfPh")),loaderKey:"defaultNotificationLoader",strategy:n("XBtf").a.Critical};var y=u.e(h),T=n("b5s6"),w=n("rHpw"),E=n("VrCx"),g=n("yy6l");const v={[f.b.Notification]:y,[f.b.Tweet]:u.c({selectDisplayType:e=>e.content.displayType,handlers:{[E.a.Tweet]:Object(g.a)({allowDownvote:!0,component:p.a,createAdditionalProps:(e,{isUnread:t})=>({isUnread:t}),selectData:({entry:e,module:t})=>({isUnread:n=>t.selectIsUnread(n,e.entryId)}),withMuteConversation:!0}),[E.a.QuotedTweet]:Object(g.a)({component:T.a,createAdditionalProps:e=>({isCondensed:!0,style:I.quotedTweet})})}})};var A={...Object(m.a)({tweetDismissable:!0,withMuteConversation:!0}),...v,...b.a};const I=w.a.create((e=>({quotedTweet:{marginHorizontal:e.componentDimensions.gutterHorizontal,marginTop:0,marginBottom:e.componentDimensions.gutterVertical}})));var _=n("3XMw"),C=n.n(_),O=n("f42t"),P=n("EUHl"),L=n("5waQ"),j=n("VE3M"),x=n("yoO3"),M=n("fTQJ"),R=n("v6aA");const N=C.a.eb75875d,S=C.a.e9f1fbcb,U=C.a.f287bb3a,k=C.a.h994ec4f,D=C.a.c06d4305,Q=C.a.bfdb3c12,F=C.a.h1d919eb,B=C.a.ib4510fd;class H extends i.Component{constructor(...e){super(...e),o()(this,"_getNewItemsPillLabel",(()=>{switch(this.props.notificationsType){case L.a.All:return B;default:return}})),o()(this,"_getEmptyMessageBody",(()=>{const e=this.context.featureSwitches.isTrue("responsive_web_reactions_enabled");switch(this.props.notificationsType){case L.a.Mentions:return D;case L.a.Verified:return e?F:Q;default:return e?k:U}})),o()(this,"_renderEmptyTimeline",(()=>i.createElement(d.a,{header:S,message:this._getEmptyMessageBody()}))),o()(this,"_handleAtTop",(()=>{this._updateLastReadIfNeeded()}))}componentDidMount(){const{notificationsType:e,setNotificationsType:t}=this.props;t(e)}componentWillUnmount(){const{markAllAsRead:e,notificationsType:t}=this.props;this._updateLastReadIfNeeded(),t===L.a.All&&e()}render(){const{notificationsModule:e}=this.props;return e?i.createElement(x.a,null,i.createElement(M.a,{entryConfiguration:A,key:"notification-timeline",module:e,newTweetsPillLabel:this._getNewItemsPillLabel(),newTweetsPillMode:P.a.CLIENT,onAtTop:this._handleAtTop,renderEmptyState:this._renderEmptyTimeline,title:N})):null}_updateLastReadIfNeeded(){const{notificationsType:e,unreadCount:t,updateLastRead:n}=this.props;t&&n(e)}}o()(H,"contextType",R.a);const V=e=>Object(O.a)((e=>Object(c.a)().propsFromState((()=>({unreadCount:(t,{ntabData:n})=>{var a;return null===(a=l(e,n))||void 0===a?void 0:a.selectUnreadEntriesCount(t)}}))).adjustStateProps((({unreadCount:t},{ntabData:n})=>({ntabData:null,notificationsModule:l(e,n),notificationsType:e,unreadCount:t}))).propsFromActions((({ntabData:t})=>{var n;return{markAllAsRead:null===(n=l(e,t))||void 0===n?void 0:n.markAllAsRead,updateLastRead:t&&t.updateLastSeenCursor,setNotificationsType:r.j}})).withAnalytics({page:"ntab",section:e}))(e)(H),{ntabData:j.a}),J=({notificationsType:e})=>V(e)},WR6I:function(e,t,n){"use strict";n.r(t),n.d(t,"NotificationsScreen",(function(){return k}));var a=n("ERkP"),o=n("v6aA"),i=n("es0u"),s=n("G6rE"),r=n("rxPX"),c=Object(r.a)().propsFromState((()=>({loggedInUser:s.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({isLoggedInUserVerified:!!e&&e.verified}))),l=n("pnqf"),d=n("dwig"),u=n("0+qk"),p=n("3XMw"),m=n.n(p),f=n("5FtR"),b=n("wytG"),h=n("+Bsv"),y=n("VS6U"),T=n("7JQg"),w=n("mw9i"),E=n("k/OQ"),g=n("zCf4");const v=m.a.eb75875d,A=m.a.f8321d82,I=m.a.cdb53d79,_=m.a.h3290871,C=m.a.a98ba778,O="/notifications",P="/notifications/mentions",L="/notifications/verified",j=a.createElement(h.a,{pullRight:!0,to:"/settings/notifications"}),x=m.a.eb75875d,M=Object(l.a)(Object(b.a)((()=>Promise.resolve().then(n.bind(null,"hCg+"))))),R=Object(l.a)(Object(b.a)((()=>Promise.resolve().then(n.bind(null,"lGAB"))))),N=Object(l.a)(Object(b.a)((()=>Promise.resolve().then(n.bind(null,"srGC"))))),S=[{to:O,key:A,label:A,retainScrollPosition:!1},{to:P,key:I,label:I,retainScrollPosition:!1}],U=[...S,{to:L,key:_,label:_,retainScrollPosition:!1}],k=e=>{const{featureSwitches:t}=a.useContext(o.a),n=t.isTrue("responsive_web_ntab_verified_mentions_vit_internal_dogfood"),{history:s,isLoggedInUserVerified:r,location:c}=e,l=r||n,p=a.createElement(g.e,null,a.createElement(g.c,{component:M,exact:!0,path:O}),a.createElement(g.c,{component:R,exact:!0,path:P}),a.createElement(g.c,{component:N,exact:!0,path:L}));return c.pathname!==L||l?a.createElement(y.a,{documentTitle:v,history:s,primaryContent:(()=>{const e=a.createElement(u.a,{history:s});return a.createElement(d.a,{component:w.a,fab:e},p)})(),rightControl:j,secondaryBar:(()=>{const e=l?U:S;return a.createElement(E.a,{accessibilityLabel:C,links:e})})(),sidebarContent:a.createElement(i.a,null),title:x}):a.createElement(f.a,{to:O})};t.default=Object(T.c)({page:"ntab"})(c(k))},b5s6:function(e,t,n){"use strict";var a=n("97Jx"),o=n.n(a),i=n("ERkP"),s=n("v6aA"),r=n("XOJV"),c=n("eSoz"),l=n("rxPX"),d=n("0KEI");const u=(e,t)=>t.tweetId,p=(e,t)=>{const n=t.tweetId,a=n&&r.a.select(e,n);return a?Object(c.f)(e,a):void 0};var m=Object(l.a)().propsFromState((()=>({community:p,hydratedTweet:r.a.createHydratedTweetSelector(u)}))).propsFromActions((()=>({createLocalApiErrorHandler:Object(d.createLocalApiErrorHandlerWithContextFactory)("QUOTE_TWEET_CONTAINER"),fetchCommunityIfNeeded:c.b.fetchOneIfNeeded}))),f=n("YeIG"),b=n("uCxL"),h=n("x5Pi");const y=m((({community:e,createLocalApiErrorHandler:t,fetchCommunityIfNeeded:n,hydratedTweet:a,tweetId:r,...c})=>{const{featureSwitches:l,loggedInUserId:d}=i.useContext(s.a),u=null==a?void 0:a.community_id_str;i.useEffect((()=>{u&&Object(f.a)(e)&&n(u).catch(t())}),[e,u,t,n]);const p=l.isTrue("responsive_web_alt_text_badge_enabled"),m=a&&Object(h.f)(a,d,e),y=m&&Object(h.e)(m),T=l.isTrue("responsive_web_reactions_enabled");return i.createElement(b.a,o()({},c,{loggedInUserId:d,shouldShowAltLabelAlways:p,socialContextProps:y,tweet:a,withReactions:T}))}));t.a=y},f42t:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n("97Jx"),o=n.n(a),i=n("KEM+"),s=n.n(i),r=n("ERkP");class c extends r.Component{constructor(...e){super(...e),s()(this,"state",{isLoaded:!1})}componentDidMount(){return this._isMounted=!0,this.load()}componentDidUpdate(e){return this.props.modules===e.modules?null:this.load()}componentWillUnmount(){this._isMounted=!1}load(){this.setState({isLoaded:!1});const{modules:e}=this.props,t=Object.keys(e);return Promise.all(t.map((t=>e[t]()))).then((e=>t.reduce(((t,n,a)=>(t[n]=e[a],t)),{}))).then((e=>{if(!this._isMounted)return null;this.setState({modules:e,isLoaded:!0})}))}render(){const{isLoaded:e}=this.state,t=e?this.state.modules:{};return r.Children.only(this.props.children(t||{}))}}const l=(e,t)=>n=>r.createElement(c,{modules:t},(t=>r.createElement(e,o()({},t,n))))},"hCg+":function(e,t,n){"use strict";n.r(t);var a=n("5waQ"),o=n("QuZr");t.default=Object(o.a)({notificationsType:a.a.All})},lGAB:function(e,t,n){"use strict";n.r(t);var a=n("5waQ"),o=n("QuZr");t.default=Object(o.a)({notificationsType:a.a.Mentions})},qJ6t:function(e,t,n){"use strict";n.r(t),n.d(t,"notificationsModule",(function(){return d})),n.d(t,"updateLastSeenCursor",(function(){return u}));var a=n("vWJI"),o=n("k49u"),i=n("0KEI"),s=n("UtAB"),r=n("fs1G"),c=n("5waQ"),l=n("ZNT5");const d=(e=c.a.All)=>Object(l.a)({timelineId:`notifications-${e}`,getEndpoint:e=>e.URT.fetchNotifications,getEndpointParams:t=>{const{polling:n,...a}=t;return{type:e,...a}},context:"FETCH_NOTIFICATIONS_TIMELINE",perfKey:"notifications",postFetchAction:s.a,staleIntervalMs:5e3}),u=(e=c.a.All)=>(t,n,{api:s})=>{const c=d(e),l=c&&a.getTopCursor(c.selectEntries(n()));if(l){const n={cursor:a.getValue(l),type:e},c=t(Object(i.createLocalApiErrorHandlerWithContextFactory)("APP_UPDATE_NOTIFICATION_LAST_READ")({[o.a.AppInReadOnlyMode]:{customAction:r.a}}));s.URT.updateNotificationsLastSeenCursor(n).catch(c)}};t.default=d(c.a.All)},srGC:function(e,t,n){"use strict";n.r(t);var a=n("5waQ"),o=n("QuZr");t.default=Object(o.a)({notificationsType:a.a.Verified})}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/bundle.Notifications.805ad945.js.map
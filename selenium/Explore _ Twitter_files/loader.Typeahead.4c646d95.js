(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{"4ZbN":function(e,t,s){"use strict";t.a={deleteRecentSearchesDialog:"deleteRecentSearchesDialog",deleteSavedSearchDialog:"deleteSavedSearchDialog",typeaheadEmptySearch:"typeaheadEmptySearch",typeaheadRecentSearchesHeader:"typeaheadRecentSearchesHeader",typeaheadRecentSearchesItem:"typeaheadRecentSearchesItem",typeaheadSavedSearchesContainer:"typeaheadSavedSearchesContainer",typeaheadSavedSearchesHeader:"typeaheadSavedSearchesHeader",typeaheadSavedSearchesItem:"typeaheadSavedSearchesItem"}},"72nz":function(e,t,s){"use strict";s.r(t),s.d(t,"SearchBoxContainer",(function(){return Ke}));var a=s("97Jx"),r=s.n(a),n=s("KEM+"),i=s.n(n),c=(s("MvUL"),s("ERkP")),o=s("+Kfv"),h=s("lnti"),d=s("wtjx"),l=s("rxPX");var u=Object(l.a)().propsFromActions((()=>({addQuery:d.a}))).withAnalytics({component:"search_box"}),p=s("Hw0q"),m=s("3XMw"),S=s.n(m),y=s("8jkQ"),_=s("u3ZE"),f=s("rRIm"),b=s("Rp9C"),g=s("hqKg"),v=s("3IPs"),I=s("M0jS"),w=s("G6rE"),E=s("k49u"),C=s("J4ZH"),R=s("0KEI"),x=s("v4XE"),D=s("kGix");const T=e=>Object(E.c)(e,E.a.GenericUserNotFound)||Object(E.c)(e,E.a.OtherUserSuspended)||Object(E.c)(e,E.a.AddressBookLookupNotFound);var k=Object(l.a)().propsFromState((()=>{const e=Object(g.createSelector)(d.g,w.e.selectFetchStatuses,((e,t)=>{const s=Object(h.a)(e.map((e=>{var s;const a=null===(s=e.user)||void 0===s?void 0:s.id;return a&&t[a]?{id:a,fetchStatus:t[a]}:void 0})));return Object(C.a)(s,(e=>e.fetchStatus))})),t=Object(g.createSelector)(e,(e=>(e[D.a.FAILED]||[]).map((e=>e.id)))),s=Object(g.createSelector)(e,w.e.selectErrors,((e,t)=>(e[D.a.FAILED]||[]).filter((({id:e})=>T(t[e]||{}))).map((e=>e.id)))),a=Object(g.createSelector)(e,w.e.selectErrors,((e,t)=>{const s=(e[D.a.FAILED]||[]).filter((({id:e})=>!T(t[e]||{})));return(e[D.a.LOADING]||[]).length>0?D.a.LOADING:(e[D.a.LOADED]||[]).length>0?D.a.LOADED:s.length>0?D.a.FAILED:D.a.NONE})),r=Object(g.createSelector)(d.g,(e=>e.map((e=>({...e,category:v.b.RecentSearch}))))),n=Object(g.createSelector)(x.d,(e=>e.map((e=>({keyword:{query:e.query},savedSearchId:e.id_str,category:v.b.SavedSearch})))));return{isRecentSearchDataLoaded:d.e,recentSearches:r,usersFetchStatus:a,invalidRecentSearchUserIds:s,failedRecentSearchUserIds:t,savedSearches:n}})).adjustStateProps((({failedRecentSearchUserIds:e,invalidRecentSearchUserIds:t,isRecentSearchDataLoaded:s,recentSearches:a,savedSearches:r,usersFetchStatus:n})=>{const i=!a.filter((({user:e})=>e&&t.indexOf(e.id)<0)).length,c=n!==D.a.LOADING&&s&&i?D.a.LOADED:n;return{failedRecentSearchUserIds:e,invalidRecentSearchUserIds:t,recentSearches:a,fetchStatus:c,savedSearches:r}})).propsFromActions((()=>({clearAll:d.b,createLocalApiErrorHandler:Object(R.createLocalApiErrorHandlerWithContextFactory)("SEARCH_ONE_CLICK"),deleteSavedSearch:x.a,fetchRecentSearchesIfNeeded:d.c,fetchSavedSearchesIfNeeded:x.b,fetchUsersIfNeeded:w.e.fetchManyIfNeeded,fetchUsersPresenceIfNeeded:I.b.fetchManyIfNeeded,removeQuery:d.d}))).withAnalytics({element:"typeahead"}),O=s("sYRn"),U=s("v//M"),A=s("7nmT"),F=s.n(A),L=s("hOZg"),N=s("5T6p"),H=s("MWbm"),q=s("/yvb"),j=s("rHpw");const M=S.a.e68b09b4;class P extends c.PureComponent{render(){const{id:e,onRemove:t,...s}=this.props;return e?c.createElement(H.a,{style:Q.root},c.createElement(N.a,s),c.createElement(q.a,{accessibilityLabel:M,icon:c.createElement(L.a,null),onPress:t,size:"small",style:Q.button,type:"brandText"})):null}get searchItemData(){const{id:e,image:t,supportText:s,title:a}=this.props;return{category:v.b.RecentSearch,query:e,recentSearchType:v.a.Event,queryMetadata:{id:e,image:t,title:a,supportText:s}}}}const Q=j.a.create((e=>({root:{flexDirection:"row",justifyContent:"space-between"},button:{alignSelf:"center"}})));var V=P,K=s("j7Bv"),$=s("5mJL"),B=s("t62R"),z=s("EHV7");const W=c.createElement(L.a,null),G=S.a.e68b09b4;class Z extends c.Component{render(){const{description:e,id:t,name:s,onRemove:a,withNewTypeaheadUI:r}=this.props;if(!t)return null;const n=r?"xxxLarge":"xLarge",i=c.createElement(K.a,{Icon:z.a,color:"primary",size:n,style:Y.searchIcon});return c.createElement($.a,{avatarCell:i,avatarSize:n,cellStyle:Y.bodyColumn},c.createElement(H.a,null,c.createElement(B.b,{numberOfLines:1,weight:"bold",withHashflags:!0},s),c.createElement(B.b,{color:"gray700",numberOfLines:1,withHashflags:!0},e)),c.createElement(q.a,{accessibilityLabel:G,icon:W,onPress:a,size:"small",type:"brandText"}))}get searchItemData(){const{description:e,id:t,name:s}=this.props;return t?{category:v.b.RecentSearch,query:t,recentSearchType:v.a.Topic,queryMetadata:{id:t,name:s,description:e}}:null}}var X=Z;const Y=j.a.create((e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.space12}}))),J=(e,t)=>w.e.select(e,t.id),ee=(e,t)=>Object(I.d)(e,t.id);var te=Object(l.a)().propsFromState((()=>({user:J,userSpace:ee}))),se=s("v6aA"),ae=s("IMA+");const re=c.createElement(L.a,null),ne=S.a.e68b09b4,ie=S.a.fd06b02f;class ce extends c.Component{constructor(...e){super(...e),i()(this,"_handleAvatarClick",(()=>{const{userSpace:e}=this.props;e||this._handleClick()})),i()(this,"_handleClick",(()=>{const{index:e,onItemClick:t}=this.props,s=this.searchItemData;s&&t(s,e)}))}render(){const{onRemove:e,style:t,user:s,userSpace:a,withNewTypeaheadUI:r}=this.props,{featureSwitches:n}=this.context;if(!s)return null;const i=a&&n.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")?a:void 0;i&&(i.accessibilityLabel=ie({screenName:s.screen_name}));const o=c.createElement(q.a,{accessibilityLabel:ne,icon:re,onPress:e,size:"small",type:"brandText"});return c.createElement(ae.a,{avatarSize:"xLarge",avatarUri:s.profile_image_url_https,decoration:o,displayMode:r?"ExperimentalUserTypeahead":"UserCompact",isProtected:s.protected,isVerified:s.verified,name:s.name,onAvatarClick:this._handleAvatarClick,onCellClick:this._handleClick,onScreenNameClick:this._handleClick,presenceIndicator:i,screenName:s.screen_name,style:t,userId:s.id_str,withInteractiveStyling:!1,withLink:!1,withUsernameCenterAligned:!0})}get searchItemData(){return this.props.user?{category:v.b.RecentSearch,link:this.props.user.screen_name,query:this.props.id,recentSearchType:v.a.User}:null}}i()(ce,"contextType",se.a);var oe=te.forwardRef(ce),he=s("oQhu"),de=s("hiGS"),le=s("VwDm");const ue=c.createElement(L.a,null),pe=c.createElement(de.a,null),me=Object(he.a)((e=>e===v.b.SavedSearch?"destructiveText":"brandText")),Se=Object(he.a)((e=>e===v.b.SavedSearch?pe:ue));class ye extends c.Component{constructor(...e){super(...e),i()(this,"_getButtonType",(()=>{const{category:e}=this.props;return me(e)})),i()(this,"_getRemoveIcon",(()=>{const{category:e}=this.props;return Se(e)}))}render(){const{onRemove:e,query:t,withNewTypeaheadUI:s}=this.props,a=s?"xxxLarge":"xLarge",r=c.createElement(K.a,{Icon:le.a,color:"neutral",size:a,style:_e.searchIcon});return c.createElement($.a,{avatarCell:r,avatarSize:a,cellStyle:_e.bodyColumn},c.createElement(B.b,{numberOfLines:1,withHashflags:!0},t),c.createElement(q.a,{accessibilityLabel:"",icon:this._getRemoveIcon(),onPress:e,size:"small",type:this._getButtonType()}))}get searchItemData(){const{category:e,query:t}=this.props;return{category:e,query:t,recentSearchType:e===v.b.RecentSearch?v.a.Keyword:void 0}}}const _e=j.a.create((e=>({bodyColumn:{alignItems:"center",flexDirection:"row",justifyContent:"space-between"},searchIcon:{marginRight:e.spaces.space12}})));var fe=ye,be=s("htQn");class ge extends c.Component{constructor(e,t){super(e,t),i()(this,"_renderSearchItem",(()=>{const{index:e,item:t,onItemClick:s}=this.props;return t.keyword?c.createElement(fe,{category:t.category,onRemove:this._handleOnRemove,query:t.keyword.query,ref:this._handleItemRef,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.user?c.createElement(oe,{id:t.user.id||"",index:e,onItemClick:s,onRemove:this._handleOnRemove,ref:this._handleItemRef,style:ve.itemPadding,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.topic?c.createElement(X,{description:t.topic.description||"",id:t.topic.id,name:t.topic.name||"",onRemove:this._handleOnRemove,ref:this._handleItemRef,withNewTypeaheadUI:this._withNewTypeaheadUI}):t.event?c.createElement(V,{id:t.event.id,image:t.event.image||{url:"",height:0,width:0},onRemove:this._handleOnRemove,ref:this._handleItemRef,supportText:t.event.supportText||"",title:t.event.title||"",withNewTypeaheadUI:this._withNewTypeaheadUI}):null})),i()(this,"_handleItemRef",(e=>{this._itemRef=e})),i()(this,"_handleOnRemove",(e=>{const{index:t,item:s,onRemoveQuery:a}=this.props;a(s,t),e.stopPropagation()})),i()(this,"_handleOnClick",(()=>{const{index:e,item:t,onItemClick:s}=this.props;t.user||this.searchItemData&&s(this.searchItemData,e)})),this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}render(){const{domId:e,item:t,testID:s}=this.props;return c.createElement(o.a,{viewType:"search_item"},c.createElement(be.a,{accessibilityRole:"option",accessibilityState:{selected:!!e},focusable:!0,nativeID:e,onClick:this._handleOnClick,style:[ve.root,e&&ve.focused,!(null!=t&&t.user)&&ve.itemPadding],testID:s},this._renderSearchItem()))}get searchItemData(){return this._itemRef?this._itemRef.searchItemData:null}}i()(ge,"contextType",se.a);const ve=j.a.create((e=>({root:{cursor:"pointer"},itemPadding:{paddingHorizontal:e.componentDimensions.gutterHorizontal,paddingVertical:e.componentDimensions.gutterVertical},focused:{backgroundColor:e.colors.gray0}})));var Ie=ge,we=s("4ZbN"),Ee=s("eb3s"),Ce=s("MXDK");const Re=S.a.ee295fbe,xe={headline:S.a.f45c425f,text:S.a.caae4dd9,confirmButtonLabel:S.a.dbd5d40f},De=S.a.a8d68f61,Te=S.a.c6530778,ke=S.a.e047b8fa,Oe=["user","keyword"];class Ue extends c.Component{constructor(e,t){super(e,t),i()(this,"_withNewTypeaheadUI",!1),i()(this,"_getRecentSearchItems",(()=>{const{failedRecentSearchUserIds:e,recentSearches:t}=this.props,{allowedRecentSearchItems:s}=this.state,a=t.filter((({user:t})=>!t||e.indexOf(t.id)<0)).filter((e=>Object.keys(e).some((e=>s.includes(e)))));return a.length>15?a.slice(0,15):a})),i()(this,"_render",(()=>{const{domId:e,savedSearches:t}=this.props,s=0===this._getNumOfSearchItems(),a=this._getRecentSearchItems();return s?c.createElement(H.a,{style:Ae.emptyState,testID:we.a.typeaheadEmptySearch},c.createElement(B.b,{align:"center",color:"gray700"},Re)):c.createElement(H.a,{accessibilityRole:"listbox",nativeID:e},a.length>0?c.createElement(c.Fragment,null,c.createElement(H.a,{style:Ae.header,testID:we.a.typeaheadRecentSearchesHeader},c.createElement(B.b,{numberOfLines:1,size:"headline1",weight:"bold"},De),c.createElement(q.a,{onPress:this._handleClearAllClick,size:"xSmall",type:"brandText"},ke)),a.map(((e,t)=>this._renderRecentSearchItem(e,t)))):null,t.length>0?c.createElement(c.Fragment,null,c.createElement(H.a,{accessibilityHidden:!0,style:[Ae.header,Ae.borderTop],testID:we.a.typeaheadSavedSearchesHeader},c.createElement(B.b,{numberOfLines:1,size:"headline1",weight:"bold"},Te)),this._renderSavedSearches()):null)})),i()(this,"_renderRecentSearchItem",((e,t)=>{const{ariaDescendantId:s}=this.props,a=this.state.focusIndex===t;return c.createElement(Ie,{domId:a?s:void 0,index:t,item:e,key:this._chooseKeyType(e,t),onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:a?this._setFocusedItemRef:void 0,testID:we.a.typeaheadRecentSearchesItem})})),i()(this,"_chooseKeyType",((e,t)=>e.keyword?`keyword_${e.keyword.query}`:e.user?`user_${e.user.id}`:e.topic?`topic_${e.topic.id}`:e.event?`event_${e.event.id}`:`${t}`)),i()(this,"_renderSavedSearches",(()=>{const{ariaDescendantId:e,savedSearches:t}=this.props,{focusIndex:s}=this.state,a=this._getRecentSearchItems(),r=[...t];return r.reverse(),c.createElement(H.a,{testID:we.a.typeaheadSavedSearchesContainer},r.map(((t,r)=>{const n=s===r+a.length;return c.createElement(Ie,{domId:n?e:void 0,index:r,item:t,key:t.savedSearchId,onItemClick:this._handleOnItemClick,onRemoveQuery:this._handleRemoveQuery,ref:n?this._setFocusedItemRef:void 0,testID:we.a.typeaheadSavedSearchesItem})})))})),i()(this,"_getNumOfSearchItems",(()=>{const{savedSearches:e}=this.props,t=this._getRecentSearchItems();return e.length+t.length})),i()(this,"_handleUsersRetry",(()=>{this._fetchUsersDetailsIfNeeded()})),i()(this,"_fetchUsersDetailsIfNeeded",(()=>{const{createLocalApiErrorHandler:e,fetchUsersIfNeeded:t,fetchUsersPresenceIfNeeded:s,invalidRecentSearchUserIds:a,recentSearches:r}=this.props,{featureSwitches:n,loggedInUserId:i}=this.context,c=((e,t)=>e.map((e=>{var t;return null==e||null===(t=e.user)||void 0===t?void 0:t.id})).filter(Boolean).filter((e=>t.indexOf(e)<0)))(r,a);t(c).catch(e({})),i&&n.isTrue("voice_rooms_recent_search_audiospace_ring_enabled")&&s(c).catch(e({}))})),i()(this,"_handleRemoveQuery",((e,t)=>{const{analytics:s,removeQuery:a}=this.props;switch(e.category){case v.b.RecentSearch:{const r={keyword:e.keyword,user:e.user,topic:e.topic,event:e.event};a(r),this._resetFocus();const n=b.a.forRecentSearchResult(r,t),i=this._handleRemoveAction(e);n&&s.scribe({action:i,data:{items:[n]}});break}case v.b.SavedSearch:this.setState({shouldShowDeleteSavedSearchConfirmation:!0,savedSearchIdToDelete:e.savedSearchId});break;default:return}})),i()(this,"_handleRemoveAction",(e=>e.user?"clear_user":e.topic?"clear_topic_interests":e.event?"clear_event":"clear_topic")),i()(this,"_handleClearAllClick",(()=>{this.setState({shouldShowClearAllConfirmationSheet:!0})})),i()(this,"_handleOnClearAllConfirm",(()=>{const{analytics:e,clearAll:t}=this.props;t(),e.scribeAction("clear_all"),this.setState({shouldShowClearAllConfirmationSheet:!1})})),i()(this,"_handleOnClearAllCancel",(()=>{this.setState({shouldShowClearAllConfirmationSheet:!1})})),i()(this,"_handleOnDeleteSavedSearchConfirm",(()=>{const{analytics:e,deleteSavedSearch:t,savedSearches:s}=this.props,{savedSearchIdToDelete:a}=this.state,r=s.findIndex((e=>e.savedSearchId===a)),n=s[r];if(a){t(a);const s=n&&b.a.forSavedSearchResult(n.keyword.query,r);s&&e.scribe({element:"saved_search",action:"delete",data:{items:[s]}})}this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})})),i()(this,"_handleOnDeleteSavedSearchCancel",(()=>{this.setState({shouldShowDeleteSavedSearchConfirmation:!1,savedSearchIdToDelete:void 0})})),i()(this,"_handleOnItemClick",((e,t)=>{const{onDismiss:s,onItemClick:a}=this.props;a(e,t),this._scribeClick(e,t),s&&s()})),i()(this,"_scribeRecentSearchImpression",(()=>{const{analytics:e,recentSearches:t}=this.props;if(t&&t.length){const s=Object(h.a)(t.map(((e,t)=>b.a.forRecentSearchResult(e,t))));e.scribe({action:"impression",data:{items:s}})}})),i()(this,"_scribeSavedSearchImpression",(()=>{const{analytics:e,savedSearches:t}=this.props;if(t&&t.length){const s=Object(h.a)(t.map(((e,t)=>b.a.forSavedSearchResult(e.keyword.query,t))));e.scribe({element:"saved_search",action:"impression",data:{items:s}})}})),i()(this,"_scribeClick",((e,t)=>{const{analytics:s}=this.props;switch(e.category){case v.b.SavedSearch:{const a=b.a.forSavedSearchResult(e.query,t);s.scribe({element:"typeahead",action:"click",data:{targets:[a]}});break}case v.b.RecentSearch:{let a;e.recentSearchType&&(a=e.recentSearchType===v.a.User?{user:{type:v.a.User,id:e.query}}:e.recentSearchType===v.a.Event&&e.queryMetadata&&e.queryMetadata.title?{event:{...e.queryMetadata,type:v.a.Event,id:e.query}}:e.recentSearchType===v.a.Topic&&e.queryMetadata&&e.queryMetadata.name?{topic:{...e.queryMetadata,type:v.a.Topic,id:e.query}}:{keyword:{type:v.a.Keyword,query:e.query}});const r=a&&b.a.forRecentSearchResult(a,t);r&&s.scribe({action:"click",data:{targets:[r]}});break}}})),i()(this,"_setFocusedItemRef",(e=>{this._focusedItemRef=e,e&&this._shouldScrollToFocusedItem&&(Object(Ce.c)(this._getScrollParent(),this._getFocusedItem()),this._shouldScrollToFocusedItem=!1)})),i()(this,"hasFocusedItem",(()=>this._getNumOfSearchItems()>0)),i()(this,"selectFocusedItem",(()=>{if(this.hasFocusedItem()){const e=this._focusedItemRef&&this._focusedItemRef.searchItemData;e&&this._handleOnItemClick(e,this.state.focusIndex)}})),i()(this,"_setFocusIndex",((e,t)=>{const{onItemFocusChanged:s}=this.props;this._shouldScrollToFocusedItem=t,this.setState({focusIndex:e}),s&&s()})),i()(this,"_resetFocus",(()=>{this._setFocusIndex(-1)})),i()(this,"focusNext",(()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const s=e+1>=t?0:e+1;this._setFocusIndex(s,!0)})),i()(this,"focusPrevious",(()=>{const{focusIndex:e}=this.state,t=this._getNumOfSearchItems();if(0===t)return;const s=e-1<0?t-1:e-1;this._setFocusIndex(s,!0)}));const{featureSwitches:s}=this.context;var a,r;this.state={focusIndex:0,shouldShowClearAllConfirmationSheet:!1,shouldShowDeleteSavedSearchConfirmation:!1,allowedRecentSearchItems:(a=!0===s.getValueWithoutScribeImpression("responsive_web_recent_searches_topics_enabled"),r=!0===s.getValueWithoutScribeImpression("responsive_web_recent_searches_events_enabled"),[...Oe,a?"topic":"",r?"event":""])},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}componentDidMount(){const{createLocalApiErrorHandler:e,fetchRecentSearchesIfNeeded:t,fetchSavedSearchesIfNeeded:s,recentSearches:a,savedSearches:r}=this.props;t(),s().catch(e({})),this._fetchUsersDetailsIfNeeded(),this._scribeRecentSearchImpression(),this._scribeSavedSearchImpression(),(a&&a.length||r&&r.length)&&this._resetFocus()}componentDidUpdate(e){const{recentSearches:t,savedSearches:s}=this.props;e.recentSearches!==t&&(this._fetchUsersDetailsIfNeeded(),this._resetFocus(),this._scribeRecentSearchImpression()),e.savedSearches!==s&&(this._resetFocus(),this._scribeSavedSearchImpression())}render(){const{fetchStatus:e,style:t}=this.props,{shouldShowClearAllConfirmationSheet:s,shouldShowDeleteSavedSearchConfirmation:a}=this.state;return c.createElement(H.a,{style:t},c.createElement(U.a,{fetchStatus:e,onRequestRetry:this._handleUsersRetry,render:this._render}),s?c.createElement(Ee.a,{confirmButtonLabel:xe.confirmButtonLabel,confirmButtonType:"destructiveFilled",headline:xe.headline,onCancel:this._handleOnClearAllCancel,onConfirm:this._handleOnClearAllConfirm,testID:we.a.deleteRecentSearchesDialog,text:xe.text}):null,a?c.createElement(O.a,{onCancel:this._handleOnDeleteSavedSearchCancel,onConfirm:this._handleOnDeleteSavedSearchConfirm}):null)}_getScrollParent(){if(!this._scrollParent){const e=Object(Ce.a)(F.a.findDOMNode(this));this._scrollParent=e===window?null:e}return this._scrollParent}_getFocusedItem(){const e=this._focusedItemRef&&F.a.findDOMNode(this._focusedItemRef);return e instanceof Element?e:null}}i()(Ue,"contextType",se.a);const Ae=j.a.create((e=>({emptyState:{padding:e.spaces.space12,paddingTop:e.spaces.space20},borderTop:{borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:1},header:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingVertical:e.componentDimensions.gutterVertical,paddingHorizontal:e.componentDimensions.gutterHorizontal}})));var Fe=k.forwardRef(Ue),Le="SearchBox_Search_Input",Ne=s("TnY3"),He=s("GZwR"),qe=s("4e/K");const je=S.a.ib2e46ee,Me=S.a.hbc99b02,Pe=/^(\w+)$/,Qe=[He.a.Events,He.a.Users,He.a.Topics],Ve=e=>"@"===e[0]?e.substring(1):e;class Ke extends c.Component{constructor(e,t){var s;super(e,t),i()(this,"_withNewTypeaheadUI",!1),i()(this,"_reorderResults",((e,t,s,a)=>Object(h.a)([e,t.length?t:void 0,s.length?s:void 0,a.length?a:void 0]))),i()(this,"_renderSearchBoxEmptyState",(e=>c.createElement(Fe,r()({},e,{onItemClick:this._handleSearchItemClick})))),i()(this,"_handleSearchItemClick",(({category:e,link:t,query:s,queryMetadata:a,recentSearchType:r})=>{const{addQuery:n}=this.props;e===v.b.SavedSearch?this._submitQuery({query:s,shouldAddToRecentSearch:!1,src:_.a.SavedSearchClick}):r===v.a.Keyword?this._submitQuery({query:s,shouldAddToRecentSearch:!0,src:_.a.RecentSearchClick}):r===v.a.Event?(this._routeTransition({pathname:`/i/events/${s}`}),a&&a.title&&n({event:{...a,id:s,type:v.a.Event}})):r===v.a.Topic?(this._routeTransition({pathname:`/i/topics/${s}`}),a&&a.name&&n({topic:{...a,id:s,type:v.a.Topic}})):t&&(this._routeTransition({pathname:`/${t}`}),n({user:{id:s,type:v.a.User}}))})),i()(this,"_handleSearchShortcut",(e=>{const t=this._inputRef;t&&(e&&t.setQuery(e),t.focus())})),i()(this,"_getUserExactMatch",(({hasResults:e,isLoaded:t,query:s})=>{const a=Ve(s);if(a.match(Pe))return{id:`${s}_no_result_user`,type:He.b.NoResult,data:{text:Me({screenName:a}),type:"user"}}})),i()(this,"_handleOnDismiss",(()=>{const{history:e}=this.props,{location:t}=e,s=t.state||{};if(s.searchFocused){const a={...t,state:{...s,lockScroll:!1,searchFocused:!1}};e.replace(a)}})),i()(this,"_handleOnFocus",(()=>{const{analytics:e,history:t}=this.props,{location:s}=t,a=s.state||{};if(!a.searchFocused){const r={...s,state:{...a,searchFocused:!0,lockScroll:!0}};e.scribe({action:"focus_field"}),t.push(r)}})),i()(this,"_handleChange",(e=>{this.setState({query:e})})),i()(this,"_handleTypeaheadSubmit",(()=>{const{items:e,query:t}=this.state,{analytics:s}=this.props;/^\s*$/.test(t)||(s.scribe({action:"search",data:{items:b.a.forTypeaheadResults(e),search_details:{query:t}}}),this._submitQuery({query:t,shouldAddToRecentSearch:!0}))})),i()(this,"_handleItemClick",((e,t)=>{const{addQuery:s}=this.props,{query:a}=this.state;switch(e.type){case He.b.User:if(e.data.id_str){s({user:{id:e.data.id_str,type:v.a.User}})}this._routeTransition({pathname:`/${e.data.screen_name}`});break;case He.b.Topic:case He.b.Hashtag:this._submitQuery({query:e.data.topic,shouldAddToRecentSearch:!0,src:_.a.TypeaheadClick});break;case He.b.Event:e.data&&e.data.url?this._routeTransition({pathname:y.b.parseInternalUrl(e.data.url)}):this._submitQuery({query:e.data.topic,src:_.a.TypeaheadClick});break;case He.b.NoResult:{const{type:t}=e.data;"user"===t?this._routeTransition({pathname:`/${Ve(a)}`}):"topic"===t&&this._submitQuery({query:a,shouldAddToRecentSearch:!0,src:_.a.TypeaheadClick});break}}})),i()(this,"_handleItemsChanged",(e=>{this.setState({items:e})})),i()(this,"_routeTransition",(({params:e,pathname:t,query:s,src:a})=>{const{history:r,location:n}=this.props,i={...n,pathname:t,search:"",query:e||(s?{q:s,src:a}:{}),state:{...n.state,searchFocused:!1,lockScroll:!1}};r.replace(i)})),i()(this,"_submitQuery",(({query:e,shouldAddToRecentSearch:t=!1,src:s=_.a.Typed})=>{const{addQuery:a,mode:r,onSubmit:n,searchFilters:i,searchRoute:c}=this.props;if(n&&n(e,s,this.state.lastSubmittedQuery===e),t){a({keyword:{query:e,type:v.a.Keyword}})}const o=Object(v.g)({query:e,querySrc:s,mode:r,searchFilters:i});this._routeTransition({pathname:c,params:o,src:s}),this.setState({lastSubmittedQuery:e})})),i()(this,"_setInputRef",(e=>{this._inputRef=e})),this.state={query:e.initialValue,items:[],lastSubmittedQuery:Object(p.a)(null===(s=e.location.query)||void 0===s?void 0:s.q)},this._withNewTypeaheadUI=this.context.featureSwitches.isTrue("responsive_web_account_search_readability_enabled")}componentDidMount(){const{shouldHandleSearchShortcut:e}=this.props;e&&(this._unregisterSearchShortcutHandler=Object(f.b)(this._handleSearchShortcut))}componentWillUnmount(){this._unregisterSearchShortcutHandler&&this._unregisterSearchShortcutHandler()}render(){const{forceVdlDisable:e,history:t,isCompact:s,isInSidebar:a,isOnHomepage:r,location:n,placeholder:i}=this.props,{query:h}=this.state,{location:d}=t,l=d.state||{},{searchPrefill:u}=n.state||{},p=this.props.initialValue||u;let m,S,y;const _=!!n.state&&!!n.state.searchFocused;return l.searchFocused&&(m=this.context.featureSwitches.isTrue("responsive_web_search_reorder_typeahead_results_enabled"),S=!this.context.featureSwitches.isTrue("responsive_web_search_delay_prefetch_typeahead_results_enabled"),y=this.context.featureSwitches.getNumberValue("responsive_web_search_limit_user_typeahead_results")),c.createElement(o.a,{viewType:"search_field"},c.createElement(H.a,{style:$e.root},c.createElement(qe.default,{filter:Qe,forceVdlDisable:e,getTopicExactMatch:h?He.f:void 0,getUserExactMatch:h?this._getUserExactMatch:void 0,initialValue:p,inputStyle:$e.input,isCompact:s,isInSidebar:a,isOnHomepage:r,onDismiss:this._handleOnDismiss,onFocus:this._handleOnFocus,onItemClick:this._handleItemClick,onItemsChanged:this._handleItemsChanged,onQueryChange:this._handleChange,onSubmit:this._handleTypeaheadSubmit,orderResults:m?this._reorderResults:void 0,placeholder:i,ref:this._setInputRef,renderEmptyState:this._renderSearchBoxEmptyState,rounded:!0,shouldAutoFocus:_,shouldClearOnSelect:!0,shouldDeferPrefetch:!m,shouldShowPrefetchResults:!!S,source:He.d.SearchBox,testID:Le,userLimit:y||void 0,withFixedPositioning:!0,withFocusStyling:!0,withSectionDivider:!this._withNewTypeaheadUI})))}}i()(Ke,"defaultProps",{initialValue:"",isInSidebar:!1,placeholder:je,searchRoute:"/search",forceVdlDisable:!0}),i()(Ke,"contextType",se.a);const $e=j.a.create((e=>({root:{alignItems:"stretch",flexBasis:0,flexDirection:"row",flexGrow:1},input:{flexShrink:1}})));t.default=Object(Ne.a)(u(Ke))},V2l4:function(e,t,s){"use strict";s.r(t),s.d(t,"UserPicker",(function(){return b}));var a=s("KEM+"),r=s.n(a),n=s("ERkP"),i=s("ZcYN"),c=s("3XMw"),o=s.n(c),h="searchPeople",d=s("4e/K"),l=s("MWbm"),u=s("jhWN"),p=s("aV/s"),m=s("rHpw"),S=s("GZwR");const y=[S.a.Users],_=o.a.fc9dd578,f=o.a.gdb7bc24;class b extends n.Component{constructor(e,t){super(e,t),r()(this,"_renderSelectedUsersList",(()=>{const{selectedUsers:e}=this.props;return n.createElement(l.a,{style:g.selectedUsersList},e.map(this._renderSelectedUserPill))})),r()(this,"_renderSelectedUserPill",(e=>{const{withCompactPills:t}=this.props,s=this.props.onRemove.bind(this,e),a=e.type===S.b.User?n.createElement(u.a,{accessibilityHidden:!0,focusable:!1,size:"custom",uri:e.data.profile_image_url_https}):void 0;return n.createElement(p.a,{accessibilityLabel:f({name:e.data.name}),avatar:a,compact:t,key:e.id,mode:"remove",onClick:s,style:g.selectionPill,text:e.data.name})})),r()(this,"_getItemIsDisabled",(e=>{const{getItemIsDisabled:t,preselectedUsers:s}=this.props;return s.indexOf(e.id)>=0||!(!t||!t(e))})),r()(this,"_getItemDisabledMessage",(e=>{const{getItemDisabledMessage:t,preselectedUsers:s}=this.props;return s.indexOf(e.id)>=0?void 0:t?t(e):void 0})),r()(this,"_handleQueryChange",(e=>{const{onQueryChange:t}=this.props;this.setState({query:e}),t&&t(e)})),r()(this,"_handleOnSelect",(e=>{const{onSelect:t}=this.props;t&&t(e)})),this.state={query:""}}render(){const{injections:e,preselectedUsers:t,renderHeader:s,selectedUsers:a,shouldAutoFocus:r,source:c}=this.props,o=a.map((({id:e})=>e)).concat(t);return n.createElement(l.a,{style:g.root},n.createElement(d.default,{alwaysOpen:!0,disableClearButton:!0,filter:y,getItemDisabledMessage:this._getItemDisabledMessage,getItemIsDisabled:this._getItemIsDisabled,injectedItems:e,isModal:!0,onItemClick:this._handleOnSelect,onQueryChange:this._handleQueryChange,placeholder:_,renderHeader:s,renderInSearchField:a.length?this._renderSelectedUsersList:void 0,renderUserDecoration:i.a,selectedItems:o,shouldAutoFocus:r,shouldClearOnSelect:!0,shouldFocusOnClear:!0,source:c,testID:h,withSectionDivider:!1}))}}r()(b,"defaultProps",{preselectedUsers:[],shouldAutoFocus:!0,withCompactPills:!1});const g=m.a.create((e=>({root:{flex:1},selectionPill:{margin:e.spaces.space4,maxWidth:`calc(100% - ${e.spaces.space16})`},selectedUsersList:{flexDirection:"row",flexWrap:"wrap",padding:e.spaces.space4}})));t.default=b},bJYH:function(e,t,s){"use strict";s.r(t),s.d(t,"GenericTypeaheadComposeWrapper",(function(){return I}));var a=s("KEM+"),r=s.n(a),n=s("ERkP"),i=s("oEoC"),c=s("oQhu"),o=s("7nmT"),h=s.n(o),d=s("WPfJ"),l=s("OEYw"),u=s("MWbm"),p=s("Irs7"),m=s("0FVZ"),S=s("xoZN"),y=s("7N4s"),_=s("rHpw"),f=s("GZwR");const b=[f.a.Users],g=[f.a.Topics];let v=0;class I extends n.Component{constructor(e,t){super(e,t),r()(this,"_typeaheadActive",!1),r()(this,"_renderTypeaheadDropdown",(e=>{const{contextText:t,isInlineReply:s,onSelectItem:a,source:r}=this.props,{isModal:i}=this.context,c=e.resultType===f.a.Topics?"hashtag":void 0,o=n.createElement(l.a,{ariaDescendantId:this.state.ariaDescendantId,contextText:t,domId:this._dropdownDomId,filter:this._getFilter(e.resultType),maxTopics:8,onItemClick:a,onItemFocusChanged:this._handleItemFocusChanged,query:e.word,ref:this._handleTypeaheadRef,source:r,style:this._calcStyle(),topicType:c,withItemAlwaysSelected:!0});return i||s?n.createElement(m.a.HalfSheet,null,n.createElement(n.Fragment,null,n.createElement(u.a,{onClick:this._handleDismiss,style:w.mask}),o)):n.createElement(n.Fragment,null,n.createElement(u.a,{onClick:this._handleDismiss,style:w.mask}),o)})),r()(this,"render",(()=>{const{children:e,query:t}=this.props,s=n.cloneElement(e,{ariaAutocomplete:"list",ariaControls:this._dropdownDomId,ariaActiveDescendant:this.state.ariaDescendantId,ref:t=>{this._textInputNode=h.a.findDOMNode(t),this._textInputRef=t;const{ref:s}=e;s&&s(t)}});return n.createElement(u.a,{style:w.inputContainer},n.createElement(S.a,{onKeyDown:this._handleKeyDown},s,this._textInputNode&&t?this._renderTypeaheadDropdown(t):null))})),r()(this,"_getFilter",(e=>"users"===e?b:g)),r()(this,"_calcStyle",(()=>{const{isModal:e}=this.context,{isInline:t,isInlineReply:s}=this.props,a=this._textInputNode,r=window.innerHeight,n=window.innerWidth,i=this._textInputRef&&this._textInputRef.getTextInputHeight()||20;if(a instanceof window.HTMLElement){if(e||t){const t=a.getBoundingClientRect();return[this._getDropdownPositioningStyle(r,n,t.top,t.top+i,t.left,e,!!s),w.dropdownStyle]}return[this._getModalFullViewportStyle(i),w.modalFullViewportStyle]}return[this._getDropdownPositioningStyle(i,n,0,0,0,e,!!s),w.dropdownStyle]})),r()(this,"_handleKeyDown",(e=>{const{selectedItem:t}=this.state,{onSelectItem:s,query:a}=this.props,{key:r}=e;i.g(e)&&a&&("ArrowDown"===r?(this._typeaheadRef&&this._typeaheadRef.focusNext(),e.preventDefault()):"ArrowUp"===r?(this._typeaheadRef&&this._typeaheadRef.focusPrevious(),e.preventDefault()):"Enter"===r||"Tab"===r?t&&(s(t),e.preventDefault()):"Escape"===r&&(this._handleDismiss(),e.preventDefault()))})),r()(this,"_handleItemFocusChanged",(e=>this.setState({ariaDescendantId:i.b(),selectedItem:e}))),r()(this,"_handleTypeaheadRef",(e=>{this._typeaheadRef=e})),r()(this,"_handleDismiss",(()=>{this._textInputRef&&this._textInputRef.focus(),this.props.onDismiss()})),r()(this,"_getDropdownHeight",Object(c.a)(((e,t)=>{const s=50*e/100;return s>t?t:s}))),r()(this,"_getModalOrInlineReplyDropdownStyles",Object(c.a)(((e,t,s)=>e?{bottom:`${s}px`}:{top:`${t}px`}))),r()(this,"_getDropdownPositioningStyle",Object(c.a)(((e,t,s=0,a=0,r=0,n=!1,i=!1)=>{const c=t-r-10,o=e-a,h=s,d=o/e<.5&&h>o,l={maxWidth:`${c}px`,minWidth:`${Math.min(c,300)}px`,maxHeight:`${d?this._getDropdownHeight(e,h-10):this._getDropdownHeight(e,o-10)}px`};return n||i?{...l,position:"fixed",left:`${r}px`,...this._getModalOrInlineReplyDropdownStyles(d,a,e-s)}:d?{...l,bottom:"100%",position:"absolute"}:{...l,top:"100%",position:"absolute"}}))),r()(this,"_getModalFullViewportStyle",Object(c.a)((e=>({position:"absolute",top:`${e||0}px`,overflowX:"hidden",overflowY:"auto"})))),this.state={ariaDescendantId:i.b()},this._dropdownDomId=`typeaheadDropdownWrapped-${v}`,v+=1}componentDidUpdate(){const{onTypeaheadStateChange:e,query:t}=this.props,s=!(!this._textInputNode||!t);s!==this._typeaheadActive&&(this._typeaheadActive=s,e&&e(s))}resetSelectedItem(){this.setState({selectedItem:void 0})}}r()(I,"contextType",y.a),r()(I,"defaultProps",{source:f.d.Compose});const w=_.a.create((e=>({dropdownStyle:{backgroundColor:e.colors.cellBackground,borderRadius:e.borderRadii.small,boxShadow:e.boxShadows.medium,minHeight:100,overflowX:"hidden",overflowY:"auto"},mask:{..._.a.absoluteFillObject,position:"fixed"},modalFullViewportStyle:{backgroundColor:e.colors.cellBackground,right:0,left:0,borderTopColor:e.colors.borderColor,borderTopStyle:"solid",borderTopWidth:e.borderWidths.small,minHeight:100},inputContainer:{flexGrow:1,position:"relative",width:"100%",zIndex:d.g}})));t.default=Object(p.a)(I,{component:"compose"})},hiGS:function(e,t,s){"use strict";var a=s("ERkP"),r=s("Lsrn"),n=s("k/Ka");const i=(e={})=>Object(n.a)("svg",{...e,accessibilityHidden:void 0===e.accessibilityLabel,style:[r.a.root,e.style],viewBox:"0 0 24 24"},a.createElement("g",null,a.createElement("path",{d:"M20.746 5.236h-3.75V4.25c0-1.24-1.01-2.25-2.25-2.25h-5.5c-1.24 0-2.25 1.01-2.25 2.25v.986h-3.75c-.414 0-.75.336-.75.75s.336.75.75.75h.368l1.583 13.262c.216 1.193 1.31 2.027 2.658 2.027h8.282c1.35 0 2.442-.834 2.664-2.072l1.577-13.217h.368c.414 0 .75-.336.75-.75s-.335-.75-.75-.75zM8.496 4.25c0-.413.337-.75.75-.75h5.5c.413 0 .75.337.75.75v.986h-7V4.25zm8.822 15.48c-.1.55-.664.795-1.18.795H7.854c-.517 0-1.083-.246-1.175-.75L5.126 6.735h13.74L17.32 19.732z"}),a.createElement("path",{d:"M10 17.75c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75zm4 0c.414 0 .75-.336.75-.75v-7c0-.414-.336-.75-.75-.75s-.75.336-.75.75v7c0 .414.336.75.75.75z"})));i.metadata={width:24,height:24},t.a=i},kIAd:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n}));var a=s("0vv5");const r=500,n={scoper:[{type:"dmUserSearch",regexp:/^[@＠]?(.*)|^$/,srcInputs:["compose_message"],scope:{result_type:"users",count:20}},{type:"username",regexp:/^[@＠](\w{1,20})/,srcInputs:["compose"],scope:{result_type:"users",count:20}},{type:"hashtag",regexp:s.n(a).a,srcInputs:["compose"],scope:{result_type:"topics",count:20}},{type:"topic",regexp:/(.+)/,srcInputs:["search_box"],scope:{result_type:"all"}},{type:"ttt",regexp:/(.+)/,srcInputs:["welcome_flow"],scope:{count:10,result_type:"topics,ttt"}}],WordBoundary:/[!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]|$/,WordEnd:/[^!'%&'()*+,\\\-./:;<=>?[\]^{|}~\s]+$/}},oEoC:function(e,t,s){"use strict";s.d(t,"e",(function(){return i})),s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return o})),s.d(t,"g",(function(){return h})),s.d(t,"a",(function(){return d})),s.d(t,"d",(function(){return l})),s.d(t,"f",(function(){return p}));var a=s("oQhu"),r=s("kIAd"),n=s("rHpw");function i(e,t){let s;const a=r.b.scoper.find((a=>{if(-1!==a.srcInputs.indexOf(t))return s=e.match(a.regexp),s}));let n="";return s&&(n=s&&(1===s.length?s[0]:s[1])),a?{...a.scope,src:t,q:n}:null}function c(e,t){const s=t.slice(0,e),a=t.slice(e,t.length),n=s.search(r.b.WordEnd),i=n>=0?s.slice(n):"",c=a.search(r.b.WordBoundary),o=i+a.slice(0,c);return o.trim()?{start:n,end:e+c,word:o}:{start:-1,end:-1,word:""}}function o(){return`typeaheadFocus-${Math.random()}`}function h(e){const{altKey:t,ctrlKey:s,metaKey:a}=e;return!(t||s||a)}function d(e,t){const s=[];e.forEach((e=>{const a=t.find((t=>t.id===e.id));a&&a.data&&a.data.result_context?s.push(a):s.push(e)}));const a=s.map((e=>e.id)),r=t.filter((e=>a.indexOf(e.id)<0));return[...s,...r]}const l=Object(a.a)((e=>({bottom:0,paddingBottom:`calc(2.5 * ${n.a.theme.spaces.space64})`,position:"fixed",top:`${e}px`,transform:[{translate3d:"0,0,0"}]})));let u=0;const p=()=>(u+=1,`typeaheadDropdown-${u}`)},rRIm:function(e,t,s){"use strict";s.d(t,"b",(function(){return k}));var a=s("KEM+"),r=s.n(a),n=s("ERkP"),i=s("sTyV"),c=s("6/RC"),o=s("sebV"),h=s("G6rE"),d=s("rxPX"),l=Object(d.a)().propsFromState((()=>({loggedInUser:h.e.selectLoggedInUser}))).adjustStateProps((({loggedInUser:e})=>({loggedInUserScreenName:e?e.screen_name:void 0}))),u=s("3XMw"),p=s.n(u),m=s("OrGc"),S=s("QK5w"),y=s("aITJ"),_=s("MWbm"),f=s("TnY3"),b=s("rHpw"),g=s("t62R"),v=s("v6aA"),I=s("uScj"),w=s("fs1G"),E=s("BcsE"),C=s("VPAj");const R=p.a.b47e760d,x=p.a.fd2c7b43,D=new I.a,T=e=>{if(e.target instanceof HTMLInputElement){const t=e.target.tagName.toLowerCase();return"input"===t||"textarea"===t}return!1},k=e=>{if(!c.canUseDOM)return w.a;return D.subscribe(e).unsubscribe};class O extends n.Component{constructor(...e){super(...e),r()(this,"_bindKeyboardShortcuts",(()=>{const{history:e,loggedInUserScreenName:t}=this.props,s=t=>s=>{s.preventDefault(),D.getListeners().length?D.notify(t):e.push({pathname:"/explore",state:{searchFocused:!0,searchPrefill:t}})},a={[m.e.search]:s(),[m.e.goToUser]:s("@"),[m.e.openKeyboardShortcuts]:()=>e.push("/i/keyboard_shortcuts"),[m.e.goExplore]:()=>e.push("/explore"),[m.e.goSettings]:()=>e.push("/settings")},r=t=>({[m.e.goProfile]:()=>e.push(`/${t}`),[m.e.goLikes]:()=>e.push(`/${t}/likes`),[m.e.goLists]:()=>e.push(`/${t}/lists`)}),n=this.context.userClaims.isTrueAndEnabled("subscriptions_feature_1007"),c=t&&n?{...r(t),[m.e.goTopArticles]:()=>e.push("/i/articles")}:t?r(t):{},o={...a,...c,[m.e.goHome]:()=>e.push("/home"),[m.e.goDisplay]:()=>e.push("/i/display"),[m.e.goNotifications]:()=>e.push("/notifications"),[m.e.goMentions]:()=>e.push("/notifications/mentions"),[m.e.goMessages]:()=>e.push("/messages"),[m.e.newMessage]:()=>e.push("/messages/compose"),[m.e.newTweet]:()=>e.push("/compose/tweet"),[m.e.goMomentMaker]:()=>e.push("/i/moment_maker"),[m.e.goBookmarks]:()=>e.push("/i/bookmarks")},h=this.props.loggedInUserScreenName?o:a;this._unbindKeyboardShortcuts=Object(i.a)(h)})),r()(this,"_handleKeyDown",(e=>{T(e)||"Backspace"!==e.key||(this._backspaceDown=Date.now(),e.preventDefault(),e.stopPropagation())})),r()(this,"_handleKeyUp",(e=>{if(!T(e)&&"Backspace"===e.key){e.preventDefault(),e.stopPropagation();const t=this._backspaceDown,s=!!Object(E.a)(t)&&Date.now()-t<500,a=Object(S.a)({},{location:this.props.location});s&&a?this.props.history.goBack():window.close()}}))}componentDidMount(){this._bindKeyboardShortcuts(),y.b.isKaiOS()&&o.a.isStandaloneApp()&&(document.addEventListener("keydown",this._handleKeyDown),document.addEventListener("keyup",this._handleKeyUp))}componentWillUnmount(){this._unbindKeyboardShortcuts&&this._unbindKeyboardShortcuts(),y.b.isKaiOS()&&o.a.isStandaloneApp()&&(document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("keyup",this._handleKeyUp))}render(){return this.props.loggedInUserScreenName?n.createElement(_.a,{accessibilityLevel:2,accessibilityRole:"heading",style:b.a.visuallyHidden},n.createElement(g.b,null,R),n.createElement(g.b,{focusable:!1,link:"/i/keyboard_shortcuts"},x)):null}}r()(O,"contextType",v.a);const U=l(O),A=c.canUseDOM?Object(f.a)(U):Object(C.a)(null);t.a=A},sYRn:function(e,t,s){"use strict";var a=s("ERkP"),r=s("eb3s"),n=s("3XMw"),i=s.n(n),c=s("4ZbN");const o=i.a.hffea05c,h=i.a.j037e373,d=i.a.d96cf7cd;t.a=({onCancel:e,onConfirm:t})=>a.createElement(r.a,{confirmButtonLabel:d,confirmButtonType:"destructiveFilled",headline:o,onCancel:e,onConfirm:t,testID:c.a.deleteSavedSearchDialog,text:h})},u3ZE:function(e,t,s){"use strict";t.a={AdvancedSearchPage:"advanced_search_page",CashtagClick:"cashtag_click",HashtagClick:"hashtag_click",PromotedTrendClick:"promoted_trend_click",RecentSearchClick:"recent_search_click",SavedSearchClick:"saved_search_click",RelatedQueryClick:"related_query_click",SpellingCorrectionClick:"spelling_correction_click",SpellingCorrectionRevertClick:"spelling_suggestion_revert_click",SpellingExpansionClick:"spelling_expansion_click",SpellingExpansionRevertClick:"spelling_expansion_revert_click",SpellingSuggestionClick:"spelling_suggestion_click",TrendClick:"trend_click",TrendView:"trend_view",TypeaheadClick:"typeahead_click",Typed:"typed_query",TweetDetailQuoteTweet:"tdqt"}},v4XE:function(e,t,s){"use strict";s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return S})),s.d(t,"a",(function(){return y})),s.d(t,"b",(function(){return _}));var a=s("oEOe"),r=s("kGix"),n=s("Ssj5"),i=s("SrIh"),c=s("RqPI");const o="savedSearches",h={fetchStatus:r.a.NONE,savedSearches:[]},d=Object.freeze({REQUEST:"rweb/savedSearches/FETCH_SAVED_SEARCHES_REQUEST",SUCCESS:"rweb/savedSearches/FETCH_SAVED_SEARCHES_SUCCESS",FAILURE:"rweb/savedSearches/FETCH_SAVED_SEARCHES_FAILURE"}),l=Object.freeze({REQUEST:"rweb/savedSearches/SAVE_SEARCH_REQUEST",SUCCESS:"rweb/savedSearches/SAVE_SEARCH_SUCCESS",FAILURE:"rweb/savedSearches/SAVE_SEARCH_FAILURE"}),u=Object.freeze({REQUEST:"rweb/savedSearches/DELETE_SAVED_SEARCH_REQUEST",SUCCESS:"rweb/savedSearches/DELETE_SAVED_SEARCH_SUCCESS",FAILURE:"rweb/savedSearches/DELETE_SAVED_SEARCH_FAILURE"});function p(e=h,t){switch(t.type){case d.SUCCESS:{const s=t.payload,a=Array.isArray(s);return a||Object(i.a)("Saved search results are not type array",{extra:{savedSearchResultsType:typeof s}}),{...e,fetchStatus:r.a.LOADED,savedSearches:a&&s?s:[]}}case d.FAILURE:return{...e,fetchStatus:r.a.FAILED};case l.SUCCESS:return{...e,savedSearches:t.payload?[...e.savedSearches,t.payload]:e.savedSearches};case u.SUCCESS:return t.payload?{...e,savedSearches:e.savedSearches.filter((e=>e.id_str!==t.payload.id_str))}:e;default:return e}}n.a.register({[o]:p});const m=e=>e.savedSearches.savedSearches,S=e=>(t,s,{api:r})=>Object(a.b)(t,{request:r.SavedSearches.create,params:{query:e}})({actionTypes:l,context:"SAVE_SEARCH"}),y=e=>(t,s,{api:r})=>Object(a.b)(t,{request:r.SavedSearches.destroy,params:{id:e}})({actionTypes:u,context:"DELETE_SAVED_SEARCH"}),_=()=>(e,t,{api:s})=>{const n=t();if(!Object(c.l)(n))return Promise.resolve();return(e=>e.savedSearches.fetchStatus)(n)===r.a.LOADED?Promise.resolve():e(((e,t,{api:s})=>Object(a.b)(e,{request:s.SavedSearches.fetch,params:{}})({actionTypes:d,context:"FETCH_SAVED_SEARCHES"})))}}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.Typeahead.4c646d95.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{WXWl:function(t,e,i){"use strict";var s=i("ERkP"),a=i("Lsrn"),o=i("k/Ka");const n=(t={})=>Object(o.a)("svg",{...t,accessibilityHidden:void 0===t.accessibilityLabel,style:[a.a.root,t.style],viewBox:"0 0 24 24"},s.createElement("g",null,s.createElement("path",{d:"M18.707 10.293l-6-6c-.39-.39-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414.195.195.45.293.707.293s.512-.098.707-.293L11 7.414V20c0 .553.447 1 1 1s1-.447 1-1V7.414l4.293 4.293c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414z"})));n.metadata={width:24,height:24},e.a=n},o52z:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var s=i("VPAj");const a=Object(s.a)([]);Object(s.a)({})},xAHt:function(t,e,i){"use strict";i.r(e),i.d(e,"NewTweetsPill",(function(){return E}));var s=i("KEM+"),a=i.n(s),o=i("ERkP"),n=i("lnti"),r=i("hqKg"),l=i("o52z"),c=i("G6rE"),h=i("rxPX");const m=(t,e)=>e.alert&&e.alert.userIds||Object(l.a)();var p=Object(h.a)().propsFromState((()=>({userImageUrls:Object(r.createSelector)(c.e.selectAll,m,((t,e)=>e?Object(n.a)(e.map((e=>{const i=t[e];return i?i.profile_image_url_https:void 0}))):[]))}))).withAnalytics(),d=i("3XMw"),u=i.n(d),w=i("WXWl"),_=i("IbOt"),b=i("fs1G"),g=i("rcen"),y=i("MWbm"),S=i("I4+6"),D=i("rHpw"),f=i("cm6r"),I=i("MAI/"),T=i("t62R");const v=u.a.gdb8bdcc,A=u.a.ac0f6491,C={component:"new_tweet_prompt"},L={},x={};class E extends o.PureComponent{constructor(...t){super(...t),a()(this,"state",{show:!1}),a()(this,"_getLastShownTime",(()=>x[this.props.timelineId])),a()(this,"_attemptShow",(()=>{const{alert:t,isAtNewest:e,removeAlert:i,timelineId:s,unreadCount:a}=this.props;if(this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._mounted&&(t||a>0)){const a=this._getDelayRemaining();if(a<=0){if(t&&e())return void i();this.setState({show:!0}),L[s]=Date.now(),this._scribeAction("show")}else this._timeoutID=setTimeout(this._attemptShow,a)}})),a()(this,"_handleScrollDown",(()=>{const{alert:t,remainVisibleInterval:e,timelineId:i}=this.props;let s=e;t&&t.displayDurationMs&&t.displayDurationMs>-1&&(s=t.displayDurationMs),this.state.show&&Date.now()>=L[i]+s&&(this._scribeAction("dismiss"),this._hide())})),a()(this,"_handleClick",(()=>{const{applyNewTweetsBarInstructions:t}=this.props;this._scribeAction("click"),window.scrollTo(0,0),t&&t(),this._hide()}))}componentDidMount(){this._mounted=!0,this._getLastShownTime()||this._updateLastShownTime(this.props.timelineId),this._attemptShow(),this._cancelMomentum=Object(_.a)({onUp:b.a,onDown:this._handleScrollDown})}componentDidUpdate(t,e){const{alert:i,timelineId:s,unreadCount:a}=this.props,o=t.timelineId!==s,n=o&&!this._getLastShownTime();o?(n&&this._updateLastShownTime(s),e.show&&this._updateLastShownTime(t.timelineId),t.removeAlert&&t.removeAlert(),this.setState({show:!1}),this._attemptShow()):((i&&!e.show||a>t.unreadCount)&&this._attemptShow(),!t.alert&&0!==a||i||this._hide())}componentWillUnmount(){const{removeAlert:t,timelineId:e}=this.props;this._mounted=!1,this._timeoutID&&clearTimeout(this._timeoutID),this.state.show&&(this._updateLastShownTime(e),t&&t()),this._cancelMomentum()}render(){const{alert:t,label:e,userImageUrls:i}=this.props,{show:s}=this.state;let a;a=t?t.richText&&o.createElement(g.a,{entities:t.richText.entities,text:t.richText.text}):e;const n=S.a.generate({backgroundColor:D.a.theme.colors.primary,color:D.a.theme.colors.whiteOnColor});return o.createElement(y.a,{accessibilityRole:"status"},o.createElement(f.a,{accessibilityHidden:!s,accessibilityLabel:A,accessibilityRole:"button",interactiveStyles:n,onClick:this._handleClick,style:[O.pill,s&&O.show]},o.createElement(y.a,{style:O.innerPill},o.createElement(w.a,{style:O.icon}),i&&i.length>0?o.createElement(y.a,{style:O.facepile},o.createElement(I.a,{borderColor:"primary",userAvatarSize:"large",userAvatarUrls:i})):null,o.createElement(T.b,{color:"whiteOnColor",numberOfLines:1,style:O.pillText},a))))}_getDelayRemaining(){const{alert:t,triggerDelay:e}=this.props,i=t&&t.triggerDelayMs||e;return this._getLastShownTime()+i-Date.now()}_updateLastShownTime(t){t&&(x[t]=Date.now())}_hide(){const{alert:t,removeAlert:e,timelineId:i}=this.props;this._mounted&&(this._updateLastShownTime(i),this.setState({show:!1})),t&&setTimeout((()=>e()),500)}_scribeAction(t){const{analytics:e,scribeNamespace:i}=this.props,s={...i,...C,action:t};e.scribe(s)}}a()(E,"defaultProps",{isAtNewest:()=>!0,label:v,remainVisibleInterval:3e3,triggerDelay:24e4,unreadCount:0});const O=D.a.create((t=>({pill:{boxShadow:t.boxShadows.small,backgroundColor:t.colors.primary,borderRadius:t.borderRadii.infinite,paddingHorizontal:t.spaces.space16,opacity:0,justifyContent:"center",transform:[{translate3d:"0, 0, 0"}],transitionProperty:"transform, opacity",transitionDuration:"0.15s",transitionTimingFunction:"ease, ease, step-end"},innerPill:{flexDirection:"row",paddingVertical:t.spaces.space4},icon:{width:t.spaces.space20,marginRight:t.spaces.space4,alignSelf:"center",color:t.colors.whiteOnColor},facepile:{marginRight:t.spaces.space8},pillText:{alignSelf:"center"},show:{opacity:1,transitionTimingFunction:"ease, ease, step-start",transform:[{translate3d:"0, 3.5em, 0"}]}}))),M=p(E);e.default=M}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.NewTweetsPill.9a2e2855.js.map
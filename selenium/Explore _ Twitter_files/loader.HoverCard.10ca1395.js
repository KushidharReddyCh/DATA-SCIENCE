(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{jHwr:function(e,t,o){"use strict";t.a=(e,t)=>{let o=null;const n=()=>{o=null,e()};return()=>(o||(o=t(n)),o)}},"z2a+":function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return y}));var n=o("97Jx"),r=o.n(n),i=o("KEM+"),s=o.n(i),a=o("ERkP"),d=o("zfvc"),c=o("siLd"),l=o("jHwr"),h=o("VY6S"),p=o("w9LO"),u=o("TCjc"),w=o("nb/L"),m=o("Oe3h"),b=o("0FVZ"),f=o("rHpw"),_=o("i4Oy"),C=o("shC7"),g=o("MWbm");class y extends a.Component{constructor(e,t){super(e,t),s()(this,"_renderContent",(()=>{const{enableClickOutsideToDismiss:e,onAnimateComplete:t,onDismiss:o,show:n,withContentOverflow:i,withFixedPosition:s,withFocusContainer:c,withMask:l,withRoundedSides:h,withoutLayer:w}=this.props,{bottom:b,left:f,right:_,top:C}=this.state,y=void 0===C&&void 0===b,E=y||!c?a.Fragment:p.a,R={top:C,bottom:b,left:f,right:_},k=[y?x.initialRenderWrapper:s?x.contentWrapperFixed:x.contentWrapperAbsolute,R],v=h?x.infiniteCornerRadius:x.defaultCornerRadius,A=[x.contentRoot,v,!i&&x.overflowHidden];return a.createElement(u.a.Provider,{value:{isInHoverCard:!0}},e?a.createElement(g.a,{onClick:o,style:[x.mask,l&&x.withMask]}):null,a.createElement(g.a,{onKeyUp:this._handleEsc,ref:this._setContentNode,style:k},a.createElement(E,null,a.createElement(d.b,{animateMount:!0,duration:"long",onAnimateComplete:t,show:n,type:"fade"},(({isAnimating:e})=>l||w?a.createElement(g.a,{style:A},this._renderInnerBody()):a.createElement(m.a,{id:"HoverCard",minimizeReporting:e},((e,t)=>a.createElement(g.a,r()({ref:e()},t({style:A})),this._renderInnerBody()))))))))})),s()(this,"_renderInnerBody",(()=>{const{children:e,withArrow:t}=this.props;return a.createElement(a.Fragment,null,t&&a.createElement(w.a,{style:this._getArrowStyle()}),e)})),s()(this,"_setContentNode",(e=>{this._contentNode=e||void 0,this._scheduleUpdate()})),s()(this,"_handleEsc",(e=>{const{onDismiss:t}=this.props,{altKey:o,ctrlKey:n,key:r,metaKey:i}=e;!(o||n||i)&&"Escape"===r&&t&&t()})),s()(this,"_updatePosition",(()=>{if(!this._mounted)return;const{anchorNode:e,preferredHorizontalOrientation:t,preferredVerticalOrientation:o,withArrow:n,withFixedPosition:r}=this.props,i=f.a.theme.borderRadiiPx.large,s=Object(c.c)({anchorNode:e,contentNode:this._contentNode,preferredHorizontalOrientation:t,preferredVerticalOrientation:o,withArrow:n,withFixedPosition:r,borderRadius:i});if(!s)return;const{arrowPositionStart:a,bottom:d,left:l,right:h,top:p}=s;this.setState({arrowPositionStart:a,bottom:d,left:l,right:h,top:p})})),this.state=Object.freeze({}),this._scheduleUpdate=Object(l.a)(this._updatePosition,window.requestAnimationFrame),this._scheduleDebouncedUpdate=Object(h.a)(this._scheduleUpdate,250)}componentDidMount(){this._mounted=!0,_.a.addEventListener("change",this._scheduleDebouncedUpdate)}componentDidUpdate(e){const{anchorNode:t}=this.props;e.anchorNode!==t&&this._scheduleDebouncedUpdate()}componentWillUnmount(){const{onHoverCardUnmount:e}=this.props;this._mounted=!1,_.a.removeEventListener("change",this._scheduleDebouncedUpdate),e&&e()}render(){const{withoutLayer:e}=this.props;return e?this._renderContent():a.createElement(b.a.Dropdown,null,this._renderContent())}_getArrowStyle(){const{arrowPositionStart:e,bottom:t}=this.state;let o;if(e){o=[x.arrow,t?x.downArrow:x.upArrow];const n=`calc(${e}px - ${w.a.metadata.width/2}px)`;C.a.getConstants().isRTL?o.push({right:n}):o.push({left:n})}return o}}const x=f.a.create((e=>({arrow:{color:e.colors.cellBackground,filter:`drop-shadow(${e.spaces.space1} -${e.spaces.space1} ${e.spaces.space1} ${e.colors.gray200})`,fontSize:e.fontSizes.subtext2,position:"absolute",width:`${w.a.metadata.width}px`},contentWrapperAbsolute:{position:"absolute"},contentWrapperFixed:{backfaceVisibility:"hidden",position:"fixed"},initialRenderWrapper:{opacity:0,position:"fixed"},contentRoot:{backgroundColor:e.colors.cellBackground,boxShadow:e.boxShadows.medium},overflowHidden:{overflow:"hidden"},defaultCornerRadius:{borderRadius:e.borderRadii.xLarge},infiniteCornerRadius:{borderRadius:e.borderRadii.infinite},mask:{...f.a.absoluteFillObject,position:"fixed",userSelect:"none"},withMask:{backgroundColor:e.colors.maskColor},downArrow:{bottom:`-${e.fontSizes.subtext3}`,transform:"rotate(180deg)"},upArrow:{top:`-${e.fontSizes.subtext3}`}})))}}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web/loader.HoverCard.10ca1395.js.map